Entity-Relationship Diagram (ERD) for Thrift Shop Website

Entities:

1. User
   - Attributes:
     - _id (ObjectId, Primary Key)
     - username (String, required, unique)
     - password (String, required)
     - role (String, enum: ['user', 'admin'], default: 'user')
     - resetPasswordToken (String)
     - resetPasswordExpire (Date)
     - wishlist (Array of ObjectId, references Product)
     - createdAt (Date)
     - updatedAt (Date)

2. Product
   - Attributes:
     - _id (ObjectId, Primary Key)
     - name (String, required)
     - price (Number, required)
     - originalPrice (Number)
     - discount (Number)
     - image (String, required)
     - isNewArrival (Boolean, default: false)
     - rating (Number, default: 0)
     - reviews (Number, default: 0)
     - description (String, required)
     - size (String, required)
     - condition (String, required)
     - category (String, required)
     - createdAt (Date)
     - updatedAt (Date)

3. Order
   - Attributes:
     - _id (ObjectId, Primary Key)
     - orderId (String, required, unique)
     - user (ObjectId, required, references User)
     - items (Array of objects):
       - product (ObjectId, required, references Product)
       - name (String, required)
       - quantity (Number, required)
       - price (Number, required)
       - image (String, required)
     - totalAmount (Number, required)
     - customerDetails (Object):
       - name (String, required)
       - phone (String, required)
       - address (String, required)
     - status (String, enum: ['pending', 'paid', 'shipped', 'completed'], default: 'pending')
     - paymentProof (String)
     - createdAt (Date)
     - updatedAt (Date)

Relationships:

- User to Product (Wishlist): Many-to-Many
  - A User can have multiple Products in their wishlist.
  - A Product can be in multiple Users' wishlists.
  - Implemented via wishlist array in User model.

- User to Order: One-to-Many
  - A User can place multiple Orders.
  - An Order belongs to one User.

- Order to Product (Items): Many-to-Many
  - An Order can contain multiple Products (via items array).
  - A Product can be in multiple Orders.

ASCII Art Representation:

+----------------+       +----------------+       +----------------+
|     User       |       |    Product     |       |     Order      |
+----------------+       +----------------+       +----------------+
| - _id          |<--*---| - _id          |<--*---| - _id          |
| - username     |       | - name         |       | - orderId      |
| - password     |       | - price        |       | - user (ref)   |
| - role         |       | - ...          |       | - items[]      |
| - wishlist[]   |-->----|                |       | - totalAmount  |
|                |       |                |       | - ...          |
+----------------+       +----------------+       +----------------+
        |                        ^
        |                        |
        v                        |
+----------------+               |
|    Wishlist    |               |
+----------------+               |
| - user_id      |               |
| - product_id   |               |
+----------------+               |
                                   |
                                   |
+----------------+               |
|   OrderItem    |               |
+----------------+               |
| - order_id     |               |
| - product_id   |               |
| - quantity     |               |
+----------------+               |
